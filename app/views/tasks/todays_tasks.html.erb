<div class='container todays-tasks'>

<p> Here we need the mascot </p>
<p> <%= @today %> </p>
<h2> <%= @message %> </h2>
<p> Isn't it a wonderful day to accomplish some more? </p>

<% @tasks.each do |task| %>
  <div class='card d-flex flex-row'>
    <div class='m-3 d-flex align-items-center'>
      <i class="fa-solid fa-briefcase"></i>
    </div>

    <div>
      <div class='d-flex flex-row'>
        <div class='m-3'>
          <p>
            <%= link_to task_path(task) do %>
              <%= task.title %>
            <% end %>
          </p>
          <p>
            <% if task.due_date.hour < 12 %>
              <%= task.due_date.strftime("%H:%M") %>
              am
            <% else %>
              <%= (task.due_date - (12*60*60)).strftime("%H:%M") %>
              pm
            <% end %>
          </p>
        </div>

        <div class='m-3'>
          <% if task.priority == "high" %>
            <p class='high-priority-color'><i class='fa-solid fa-circle'></i></p>
          <% elsif task.priority == "medium" %>
            <p class='medium-priority-color'><i class='fa-solid fa-circle'></i></p>
          <% else %>
            <p class='low-priority-color'><i class='fa-solid fa-circle'></i></p>
          <% end %>
          <p>
            <% if task.completed %>
              <%= link_to toggle_completed_task_path(task), data: {turbo_method: :patch} do %>
                <i class='fa-regular fa-circle-check'></i>
              <% end %>
            <% else %>
              <%= link_to toggle_completed_task_path(task), data: {turbo_method: :patch} do %>
                <i class='fa-regular fa-circle'></i>
              <% end %>
            <% end %>
          </p>
        </div>
      </div>

      <p style='margin-left: 16px'>
        <% if task.description.split('').length > 30 %>
          <%= task.description.split.first(4).join(' ') %> ...
        <% else %>
          <%= task.description %>
        <% end %>
      </p>
    </div>
  </div>
<% end %>

<div class='d-flex justify-content-end mt-4'>
  <%= link_to new_task_path do %>
    <i class="fa-solid fa-plus"></i>
  <% end %>
</div>

</div>
